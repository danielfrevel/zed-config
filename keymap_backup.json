[
  // ═══════════════════════════════════════════════════════════════════
  // NORMAL MODE - LEADER KEY BINDINGS (Space)
  // LazyVim-style organization: space + category + action
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "Editor && vim_mode == normal && !VimWaiting && !menu",
    "bindings": {
      // ─────────────────────────────────────────────────────────────────
      // TOP-LEVEL QUICK ACTIONS
      // ─────────────────────────────────────────────────────────────────
      "space space": "file_finder::Toggle",
      "space /": "workspace::NewSearch",
      "space :": "command_palette::Toggle",
      "space .": "tab_switcher::Toggle",
      "space ,": "tab_switcher::Toggle",
      "space `": "pane::AlternateFile",

      // ─────────────────────────────────────────────────────────────────
      // [E]xplorer - File Tree (Neo-tree style)
      // ─────────────────────────────────────────────────────────────────
      "space e": "project_panel::ToggleFocus",
      "space E": "pane::RevealInProjectPanel",

      // ─────────────────────────────────────────────────────────────────
      // [F]ile / [F]ind Operations
      // ─────────────────────────────────────────────────────────────────
      "space f f": "file_finder::Toggle",
      "space f g": "file_finder::Toggle",
      "space f r": "projects::OpenRecent",
      "space f p": "projects::OpenRecent",
      "space f n": "workspace::NewFile",
      "space f s": "workspace::Save",
      "space f S": "workspace::SaveAll",
      "space f y": "editor::CopyPath",
      "space f Y": "editor::CopyRelativePath",

      // ─────────────────────────────────────────────────────────────────
      // [B]uffer Operations
      // ─────────────────────────────────────────────────────────────────
      "space b b": "tab_switcher::Toggle",
      "space b d": "pane::CloseActiveItem",
      "space b D": "pane::CloseAllItems",
      "space b n": "pane::ActivateNextItem",
      "space b p": "pane::ActivatePrevItem",
      "space b l": "pane::AlternateFile",
      "space b o": "pane::CloseOtherItems",
      "space b r": "pane::CloseItemsToTheRight",
      "space b L": "pane::CloseItemsToTheLeft",
      "space b P": "pane::TogglePinTab",
      "space b u": "pane::ReopenClosedItem",

      // Buffer navigation with numbers (1-9)
      "space 1": ["pane::ActivateItem", 0],
      "space 2": ["pane::ActivateItem", 1],
      "space 3": ["pane::ActivateItem", 2],
      "space 4": ["pane::ActivateItem", 3],
      "space 5": ["pane::ActivateItem", 4],
      "space 6": ["pane::ActivateItem", 5],
      "space 7": ["pane::ActivateItem", 6],
      "space 8": ["pane::ActivateItem", 7],
      "space 9": ["pane::ActivateItem", 8],

      // ─────────────────────────────────────────────────────────────────
      // [S]earch Operations (Telescope-style)
      // ─────────────────────────────────────────────────────────────────
      "space s f": "file_finder::Toggle",
      "space s g": "workspace::NewSearch",
      "space s s": "outline::Toggle",
      "space s S": "project_symbols::Toggle",
      "space s b": "tab_switcher::Toggle",
      "space s r": ["pane::DeploySearch", { "replace_enabled": true }],
      "space s w": "pane::DeploySearch",
      "space s d": "diagnostics::Deploy",
      "space s h": "zed::OpenKeymap",
      "space s p": "workspace::NewSearch",
      "space s c": "command_palette::Toggle",

      // ─────────────────────────────────────────────────────────────────
      // [G]it Operations (Fugitive-style)
      // ─────────────────────────────────────────────────────────────────
      "space g g": "git_panel::ToggleFocus",
      "space g s": "git_panel::ToggleFocus",
      "space g b": "editor::ToggleGitBlame",
      "space g B": "git::Blame",
      "space g d": "editor::ToggleSelectedDiffHunks",
      "space g D": "git::Diff",
      "space g h p": "editor::ToggleSelectedDiffHunks",
      "space g h r": "git::Restore",
      "space g h s": "git::StageAndNext",
      "space g h u": "git::UnstageAndNext",
      "space g c": "git::Commit",
      "space g a": "git::StageAll",
      "space g A": "git::UnstageAll",
      "space g p": "git::Push",
      "space g P": "git::Pull",
      "space g f": "git::Fetch",
      "space g l": "git::FileHistory",
      "space g m": "git::GenerateCommitMessage",

      // ─────────────────────────────────────────────────────────────────
      // [C]ode / LSP Operations
      // ─────────────────────────────────────────────────────────────────
      "space c a": "editor::ToggleCodeActions",
      "space c r": "editor::Rename",
      "space c f": "editor::Format",
      "space c d": "editor::GoToDefinition",
      "space c D": "editor::GoToDeclaration",
      "space c i": "editor::GoToImplementation",
      "space c t": "editor::GoToTypeDefinition",
      "space c R": "editor::FindAllReferences",
      "space c s": "outline::Toggle",
      "space c S": "project_symbols::Toggle",
      "space c h": "editor::Hover",
      "space c l": "editor::ToggleInlayHints",

      // ─────────────────────────────────────────────────────────────────
      // [W]indow / Split Management
      // ─────────────────────────────────────────────────────────────────
      "space w v": "pane::SplitRight",
      "space w s": "pane::SplitDown",
      "space w h": "workspace::ActivatePaneLeft",
      "space w j": "workspace::ActivatePaneDown",
      "space w k": "workspace::ActivatePaneUp",
      "space w l": "workspace::ActivatePaneRight",
      "space w d": "pane::CloseActiveItem",
      "space w q": "pane::CloseActiveItem",
      "space w o": "workspace::CloseInactiveTabsAndPanes",
      "space w m": "workspace::ToggleZoom",
      "space w =": "workspace::ToggleZoom",
      "space w w": "workspace::ActivateNextPane",

      // ─────────────────────────────────────────────────────────────────
      // [T]oggle / [T]erminal
      // ─────────────────────────────────────────────────────────────────
      "space t t": "terminal_panel::ToggleFocus",
      "space t n": "workspace::NewTerminal",
      "space t f": "workspace::NewCenterTerminal",

      // ─────────────────────────────────────────────────────────────────
      // [U]I Toggles
      // ─────────────────────────────────────────────────────────────────
      "space u z": "workspace::ToggleCenteredLayout",
      "space u Z": "workspace::ToggleZoom",
      "space u b": "editor::ToggleGitBlame",
      "space u h": "editor::ToggleInlayHints",
      "space u l": "editor::ToggleLineNumbers",
      "space u L": "editor::ToggleRelativeLineNumbers",
      "space u w": "editor::ToggleSoftWrap",
      "space u i": "editor::ToggleIndentGuides",
      "space u m": "editor::ToggleMinimap",
      "space u t": "editor::ToggleTabBar",
      "space u d": "workspace::ToggleBottomDock",
      "space u e": "workspace::ToggleLeftDock",
      "space u r": "workspace::ToggleRightDock",

      // ─────────────────────────────────────────────────────────────────
      // [A]I Assistant
      // ─────────────────────────────────────────────────────────────────
      "space a a": "assistant::ToggleFocus",
      "space a i": "assistant::InlineAssist",
      "space a n": "assistant::NewThread",
      "space a c": "assistant::ToggleFocus",

      // ─────────────────────────────────────────────────────────────────
      // [X] Diagnostics / Trouble-style
      // ─────────────────────────────────────────────────────────────────
      "space x x": "diagnostics::Deploy",
      "space x d": "diagnostics::Deploy",
      "space x n": "editor::GoToDiagnostic",
      "space x p": "editor::GoToPreviousDiagnostic",

      // ─────────────────────────────────────────────────────────────────
      // [Q]uit / Session
      // ─────────────────────────────────────────────────────────────────
      "space q q": "zed::Quit",
      "space q w": "workspace::CloseWindow",
      "space q a": "workspace::SaveAll",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // NORMAL + VISUAL MODE BINDINGS
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "Editor && (vim_mode == normal || vim_mode == visual) && !VimWaiting && !menu",
    "bindings": {
      // LSP goto bindings (g-prefix, standard vim-lsp style)
      "g d": "editor::GoToDefinition",
      "g D": "editor::GoToDeclaration",
      "g r": "editor::FindAllReferences",
      "g I": "editor::GoToImplementation",
      "g y": "editor::GoToTypeDefinition",
      "g h": "editor::Hover",
      "g s": "outline::Toggle",
      "g S": "project_symbols::Toggle",
      "g .": "editor::ToggleCodeActions",

      // Diagnostics navigation
      "] d": "editor::GoToDiagnostic",
      "[ d": "editor::GoToPreviousDiagnostic",

      // Git hunk navigation
      "] c": "editor::GoToHunk",
      "[ c": "editor::GoToPreviousHunk",

      // Buffer navigation
      "] b": "pane::ActivateNextItem",
      "[ b": "pane::ActivatePrevItem",

      // Method/function navigation (tree-sitter)
      "] m": "vim::NextMethodStart",
      "[ m": "vim::PreviousMethodStart",
      "] M": "vim::NextMethodEnd",
      "[ M": "vim::PreviousMethodEnd",

      // Comment navigation
      "] /": "vim::NextComment",
      "[ /": "vim::PreviousComment",

      // Section navigation
      "] ]": "vim::NextSectionEnd",
      "[ [": "vim::PreviousSectionStart",

      // Hover documentation
      "K": "editor::Hover",

      // Quick save
      "ctrl-s": "workspace::Save",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // NORMAL MODE ONLY
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "vim_mode == normal && !menu",
    "bindings": {
      // Yank to end of line (like C and D)
      "shift-y": ["workspace::SendKeystrokes", "y $"],

      // Redo with U (more intuitive)
      "shift-u": "editor::Redo",

      // Center cursor when jumping
      "ctrl-d": ["workspace::SendKeystrokes", "ctrl-d z z"],
      "ctrl-u": ["workspace::SendKeystrokes", "ctrl-u z z"],
      "n": ["workspace::SendKeystrokes", "n z z"],
      "shift-n": ["workspace::SendKeystrokes", "shift-n z z"],

      // Buffer navigation (shift+h/l like LazyVim)
      "shift-h": "pane::ActivatePrevItem",
      "shift-l": "pane::ActivateNextItem",

      // Close buffer
      "ctrl-w q": "pane::CloseActiveItem",
      "ctrl-w d": "pane::CloseActiveItem",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // VISUAL MODE
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "vim_mode == visual",
    "bindings": {
      // Surround selection
      "shift-s": "vim::PushAddSurrounds",

      // Move selection up/down
      "alt-j": "editor::MoveLineDown",
      "alt-k": "editor::MoveLineUp",

      // Stay in visual mode when indenting
      ">": ["workspace::SendKeystrokes", "> g v"],
      "<": ["workspace::SendKeystrokes", "< g v"],

      // AI assist on selection
      "space a i": "assistant::InlineAssist",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // INSERT MODE
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "Editor && vim_mode == insert && !menu",
    "bindings": {
      // Quick escape alternatives
      "j k": ["vim::SwitchMode", "Normal"],
      "j j": ["vim::SwitchMode", "Normal"],

      // Quick save from insert mode
      "ctrl-s": ["vim::SwitchMode", "Normal", "workspace::Save"],

      // Navigation in insert mode
      "ctrl-h": "editor::MoveLeft",
      "ctrl-l": "editor::MoveRight",
      "ctrl-j": "editor::MoveDown",
      "ctrl-k": "editor::MoveUp",

      // Delete word
      "ctrl-w": "editor::DeleteToPreviousWordStart",

      // Signature help
      "ctrl-k": "editor::ShowSignatureHelp",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // WINDOW NAVIGATION (Global - all contexts)
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "Workspace",
    "bindings": {
      // Ctrl+hjkl for pane navigation (works everywhere)
      "ctrl-h": "workspace::ActivatePaneLeft",
      "ctrl-j": "workspace::ActivatePaneDown",
      "ctrl-k": "workspace::ActivatePaneUp",
      "ctrl-l": "workspace::ActivatePaneRight",

      // Alt+hjkl for resizing (if supported)
      "alt-h": "workspace::ActivatePaneLeft",
      "alt-l": "workspace::ActivatePaneRight",

      // Quick splits
      "ctrl-w v": "pane::SplitRight",
      "ctrl-w s": "pane::SplitDown",
      "ctrl-w h": "workspace::ActivatePaneLeft",
      "ctrl-w j": "workspace::ActivatePaneDown",
      "ctrl-w k": "workspace::ActivatePaneUp",
      "ctrl-w l": "workspace::ActivatePaneRight",
      "ctrl-w w": "workspace::ActivateNextPane",
      "ctrl-w o": "workspace::CloseInactiveTabsAndPanes",

      // Panel toggles (global)
      "ctrl-b": "workspace::ToggleLeftDock",
      "ctrl-`": "terminal_panel::ToggleFocus",
      "ctrl-shift-e": "project_panel::ToggleFocus",
      "ctrl-shift-g": "git_panel::ToggleFocus",
      "ctrl-shift-o": "outline::Toggle",

      // File finder
      "ctrl-p": "file_finder::Toggle",
      "ctrl-shift-p": "command_palette::Toggle",
      "ctrl-t": "project_symbols::Toggle",
      "ctrl-shift-f": "workspace::NewSearch",
      "ctrl-g": "go_to_line::Toggle",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // PROJECT PANEL (Neo-tree style navigation)
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "ProjectPanel && not_editing",
    "bindings": {
      // Navigation
      "j": "menu::SelectNext",
      "k": "menu::SelectPrev",
      "h": "project_panel::CollapseSelectedEntry",
      "l": "project_panel::ExpandSelectedEntry",
      "enter": "project_panel::Open",
      "o": "project_panel::Open",
      "O": "project_panel::OpenPermanent",

      // File operations
      "a": "project_panel::NewFile",
      "A": "project_panel::NewDirectory",
      "d": "project_panel::Delete",
      "r": "project_panel::Rename",
      "x": "project_panel::Cut",
      "y": "project_panel::Copy",
      "p": "project_panel::Paste",
      "c": "project_panel::Copy",
      "m": "project_panel::Cut",
      "D": "project_panel::Duplicate",

      // Utilities
      "Y": "project_panel::CopyPath",
      "shift-y": "project_panel::CopyRelativePath",
      ".": "project_panel::ToggleFocus",
      "q": "workspace::ToggleLeftDock",
      "escape": "workspace::ToggleLeftDock",

      // Splits
      "v": "project_panel::OpenSplitVertical",
      "s": "project_panel::OpenSplitHorizontal",

      // Search in directory
      "/": "project_panel::NewSearchInDirectory",

      // Reveal in file manager
      "!": "project_panel::RevealInFileManager",

      // Fold/unfold all
      "z c": "project_panel::CollapseAllEntries",
      "z o": "project_panel::ExpandSelectedEntry",

      // Go to parent
      "-": "project_panel::SelectParent",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // TERMINAL PANEL
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "Terminal",
    "bindings": {
      // Exit terminal to normal mode
      "ctrl-\\ ctrl-n": "workspace::ActivatePaneUp",
      "escape escape": "workspace::ActivatePaneUp",

      // Terminal navigation
      "ctrl-h": "workspace::ActivatePaneLeft",
      "ctrl-l": "workspace::ActivatePaneRight",
      "ctrl-k": "workspace::ActivatePaneUp",
      "ctrl-j": "workspace::ActivatePaneDown",

      // Clear terminal
      "ctrl-l": "terminal::Clear",

      // New terminal
      "ctrl-shift-t": "workspace::NewTerminal",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // GIT PANEL
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "GitPanel",
    "bindings": {
      "j": "git_panel::NextEntry",
      "k": "git_panel::PreviousEntry",
      "g g": "git_panel::FirstEntry",
      "shift-g": "git_panel::LastEntry",
      "space": "git::ToggleStaged",
      "s": "git::StageAndNext",
      "u": "git::UnstageAndNext",
      "enter": "git::Commit",
      "c c": "git::Commit",
      "c a": "git::Amend",
      "d": "editor::ToggleSelectedDiffHunks",
      "q": "workspace::ToggleLeftDock",
      "escape": "workspace::ToggleLeftDock",
      "r": "git::Restore",
      "g m": "git::GenerateCommitMessage",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // DOCK PANELS (Common navigation)
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "Dock",
    "bindings": {
      "ctrl-h": "workspace::ActivatePaneLeft",
      "ctrl-j": "workspace::ActivatePaneDown",
      "ctrl-k": "workspace::ActivatePaneUp",
      "ctrl-l": "workspace::ActivatePaneRight",
      "escape": "workspace::Focus",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // OUTLINE PANEL
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "OutlinePanel",
    "bindings": {
      "j": "menu::SelectNext",
      "k": "menu::SelectPrev",
      "enter": "outline_panel::Open",
      "o": "outline_panel::Open",
      "q": "outline_panel::ToggleFocus",
      "escape": "outline_panel::ToggleFocus",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // FILE FINDER / TAB SWITCHER (Telescope-style)
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "Picker",
    "bindings": {
      "ctrl-j": "menu::SelectNext",
      "ctrl-k": "menu::SelectPrev",
      "ctrl-n": "menu::SelectNext",
      "ctrl-p": "menu::SelectPrev",
      "ctrl-v": "picker::ConfirmSplitRight",
      "ctrl-s": "picker::ConfirmSplitDown",
      "ctrl-t": "picker::ConfirmSplitRight",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // BUFFER SEARCH (/ search in buffer)
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "BufferSearchBar",
    "bindings": {
      "escape": "buffer_search::Dismiss",
      "enter": "search::SelectNextMatch",
      "shift-enter": "search::SelectPrevMatch",
      "ctrl-n": "search::SelectNextMatch",
      "ctrl-p": "search::SelectPrevMatch",
      "ctrl-j": "search::SelectNextMatch",
      "ctrl-k": "search::SelectPrevMatch",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // SUBWORD MOTION (CamelCase navigation)
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "VimControl && !menu && vim_mode != operator",
    "bindings": {
      "alt-w": "vim::NextSubwordStart",
      "alt-b": "vim::PreviousSubwordStart",
      "alt-e": "vim::NextSubwordEnd",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // TEXT OBJECTS (Extended)
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "vim_operator == a || vim_operator == i || vim_operator == cs",
    "bindings": {
      "q": "vim::AnyQuotes",
      "b": "vim::AnyBrackets",
      "Q": "vim::MiniQuotes",
      "B": "vim::MiniBrackets",
    },
  },

  // ═══════════════════════════════════════════════════════════════════
  // EMPTY PANE
  // ═══════════════════════════════════════════════════════════════════
  {
    "context": "EmptyPane",
    "bindings": {
      "space space": "file_finder::Toggle",
      "space f f": "file_finder::Toggle",
      "space f r": "projects::OpenRecent",
      "space e": "project_panel::ToggleFocus",
    },
  },
]
